{% extends 'base.html' %} {% block content %} {% load static %}
<style>

#customers {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    border-collapse: collapse;
    margin-left: auto;
    margin-right: auto;
    width: 100%;
    
}

#customers td, #customers th {
    border: 1px solid #ddd;
    padding: 8px;
}

#customers tr:nth-child(even){background-color: #f2f2f2;}

#customers tr:hover {background-color: #ddd;}

#customers th {
    padding-top: 12px;
    padding-bottom: 12px;
    text-align: left;
    background-color: #808080;
    color: white;
}
input[type=submit] {
        text-align: center;
        background-color: #4CAF50;
        color: white;
        padding: 14px 20px;
        margin: 8px 0;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    
    input[type=button] {
        text-align: center;
        background-color: #4CAF50;
        color: white;
        padding: 6px 6px;
        margin: 8px 0;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
</style>
<form action="." method="POST">{%csrf_token%}
<br>
<center><h2>EXAM DETAILS</h2></center>
<center>
          {% if messages %}
          <ul class="messages">
              {% for message in messages %}
              <font size="3">
                  <li>
                     <b>{{ message }}<b>
                  </li>
              </font>
              {% endfor %}
          </ul>
          {% endif %}
  </center>
  <br>
  <br>
<center><input type="submit" name="btn" style="width: 200px;" value="View Exam Detail" class="form-control ll" required style="width:80px;" /></center>
<br>
{% if sub == 1 %}
<table id="customers">
<tr>
<th>Updated Date</th><th>Shop/ Section</th><th>Name</th><th>Staff No.</th><th>Skill</th>
<th>Exam Code</th><th>Exam Date</th><th>Practical Exam Score</th><th>Oral Exam Score</th><th>Total Score</th><th>Result</th>
<th>Place of Exam</th><th>Section Superi.</th><th>Trade Test Officer</th><th>Foreman</th><th>Trade Test Admin</th>

</tr>
{% for i in obj %}
<tr>
<td><input type="text" name="updt_date{{forloop.counter}}" class="form-control ll" value="{{i.updt_date}}" readonly /></td>
<td><input type="text" name="shop_sec{{forloop.counter}}" class="form-control ll" value="{{i.shop_sec}}" required /></td>
<td><input type="text" name="name{{forloop.counter}}" class="datepick" value="{{i.name}}" readonly required /></td>
<td><input type="text" name="staff_no{{forloop.counter}}" class="form-control ll" value="{{i.staff_no}}" required /></td>
<td><input type="text" name="skill{{forloop.counter}}" class="form-control ll" value="{{i.skill}}" required /></td>
<td><input type="text" name="exam_code{{forloop.counter}}" class="form-control ll" value="{{i.exam_code}}" required /></td>
<td><input type="text" name="exam_date{{forloop.counter}}" class="form-control ll" value="{{i.exam_date}}" required /></td>
<td><input type="text" name="prac_score{{forloop.counter}}" class="form-control ll" value="{{i.prac_score}}" required /></td>
<td><input type="text" name="oral_score{{forloop.counter}}" class="form-control ll" value="{{i.oral_score}}" required /></td>
<td><input type="text" name="total_marks{{forloop.counter}}" class="form-control ll" value="{{i.total_marks}}" required /></td>
<td><input type="text" name="result{{forloop.counter}}" class="form-control ll" value="{{i.result}}" required /></td>
<td><input type="text" name="place_of_exam{{forloop.counter}}" class="form-control ll" value="{{i.place_of_exam}}" required /></td>
<td><input type="text" name="sec_sup{{forloop.counter}}" class="form-control ll" value="{{i.sec_sup}}" required /></td>
<td><input type="text" name="trade_test_officer{{forloop.counter}}" class="form-control ll" value="{{i.trade_test_officer}}" required /></td>
<td><input type="text" name="foreman{{forloop.counter}}" class="form-control ll" value="{{i.foreman}}" required /></td>
<td><input type="text" name="trade_test_admin{{forloop.counter}}" class="form-control ll" value="{{i.trade_test_admin}}" required /></td>
<td><a class="delete" title="Delete" data-toggle="tooltip"><i class="material-icons">&#xE872;</i></a></td>
</tr>
{% endfor %}
{% endif %}
</table>
<br>
<!-- <center><input type="button" name="btn" value="Add exam detail" id="add" class="form-control ll" style="width:150px;" required /></center> -->
<br>
<input type="text" name="total" id="total" value="" hidden/>
<input type="hidden" name="totindb" value={{totindb}} id="totindb">
<input type="hidden" name="length" value={{leng}} id="length">
<div id="items"></div>
<br>
<!-- <center><input type="submit" name="btn" value="Save" class="form-control ll" required style="width:80px;"/></center> -->
</form>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<script type="text/javascript">
var j=0;
var ecode="ecode";
var etype="etype";
var edate="edate";
var pdesc="practical";
var pmax="pracmax"
var odesc="oral";
var omax="orlmax";
 $(document).ready(function () {
     $('.datepick').each(function(){
    $(this).datepicker({ dateFormat: 'dd/mm/yy' });
    $(this).addClass("form-control ll");
});
});
$("#add").click(function(e) {
    event.preventDefault()
        j++;
        ecode="ecode"+String(j);
        etype="etype"+String(j);
        pdesc="practical"+String(j);
        pmax="pracmax"+String(j);
        odesc="oral"+String(j);
        omax="orlmax"+String(j);
        edate="edate"+String(j);
        var totindb=document.getElementById('totindb').value;
        if(j==1 && totindb == 0)
        {
            var happ='<div><table id="customers">'+'<tr><th style="width:250px;">Exam Code</th><th style="width:250px;">Exam Type</th><th style="width:260px;">Exam Date</th><th>Practical Exam Desc.</th><th>Oral Exam Desc.</th>'+
            '<th>Practical Max. Marks</th><th>Oral Max. Marks</th>';

    happ=happ+'</tr></table></div>';
        $('#items').append(happ);

        }
var htAppend='<div><table id="customers"><tr>'+'<td><input type="text" id='+ecode+' name='+ecode+' class="form-control ll" placeholder="exam code" required /></td>'+'<td><input type="text" id="'+etype+'" name="'+etype+'" class="form-control ll" required></td>'+
'<td><input type="text" id='+edate+' name='+edate+' class="edatec" required></td>'+
'<td><input type="text" id='+pdesc+' name='+pdesc+' class="form-control ll" required></td><td><input type="text" id='+pmax+' name='+pmax+' value="60" class="form-control ll" required></td>'+
'<td><input type="text" id='+odesc+' name='+odesc+' class="form-control ll" required></td><td><input type="text" id='+omax+' name='+omax+' value="40" class="form-control ll" required></td>';
 htAppend=htAppend+'<td><a class="delete" title="Delete" data-toggle="tooltip"><i class="material-icons">&#xE872;</i></a></td>'+'</tr></table>'+'</div>';
     $('#items').append(htAppend);
     document.getElementById("total").value=j;
     $('.edatec').each(function(){
    $(this).datepicker({ dateFormat: 'dd/mm/yy' });
    $(this).addClass("form-control ll");
});
});


$(document).on("click", ".delete", function(){
            $(this).parents("tr").remove();
    var x=document.getElementById('length').value;
    console.log(x);
    x=x-1;
    document.getElementById('length').value=x;
    console.log(document.getElementById('length'));
});
</script>

{% endblock content %}